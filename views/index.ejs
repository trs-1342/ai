<!DOCTYPE html>
<html>
    <%- include('inc/head') %>
  <body>
    <div class="container mt-5">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="card-title mb-0">googlebot</h5>
        </div>
        <div class="card-body" id="chatbox">
          <div class="alert alert-info mb-3" role="alert">
            Merhaba, ben bir chatbot'um. Benimle ne hakkında konuşmak istersin?
          </div>
        </div>
        <div class="card-footer">
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              placeholder="Mesajınızı yazın..."
            />
            <div class="input-group-append">
              <button class="btn btn-primary" type="button">Gönder</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9621170722969304"
      crossorigin="anonymous"
    ></script>
    <!-- deneme -->
    <ins
      class="adsbygoogle"
      style="display: block"
      data-ad-client="ca-pub-9621170722969304"
      data-ad-slot="8025882334"
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      $(function () {
        var $chatbox = $("#chatbox");

        function addMessage(msg, isUser) {
          var $div = $("<div>");
          $div.addClass("alert mb-3");
          if (isUser) {
            $div.addClass("alert-secondary text-right");
          } else {
            $div.addClass("alert-info");
          }
          $div.text(msg);
          $chatbox.append($div);
        }

        $("button").on("click", function () {
          var $input = $("input");
          var message = $input.val().trim();

          // Check if input is not empty
          if (message !== "") {
            addMessage(message, true);

            // Send message to server and get response
            $.ajax({
              type: "POST",
              url: "/message",
              data: { query: message },
              success: function (response) {
                addMessage(response.answer, false);
              },
              error: function () {
                addMessage("Hata: Sunucu ile iletişim kurulamıyor.", false);
              },
            });

            // Clear input field
            $input.val("");
          }
        });

        // Send message when Enter key is pressed
        $("input").on("keypress", function (e) {
          if (e.which === 13) {
            $("button").click();
            return false;
          }
        });
      });
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9621170722969304"
      crossorigin="anonymous"
    ></script>
    <!-- deneme -->
    <ins
      class="adsbygoogle"
      style="display: block"
      data-ad-client="ca-pub-9621170722969304"
      data-ad-slot="8025882334"
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9621170722969304"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
